#!/usr/bin/python3

import logging
import json
from pathlib import Path

def setup_logging(default_path='logging.json', default_level=logging.INFO, env_key='LOG_CFG'):
    """Konfigurerar loggning baserat på en JSON-fil."""
    path = default_path
    value = os.getenv(env_key, None)
    if value:
        path = value
    if Path(path).exists():
        with open(path, 'rt') as f:
            config = json.load(f)
        logging.config.dictConfig(config)
    else:
        logging.basicConfig(level=default_level)

def load_config(config_file):
    """Laddar konfigurationsinställningar från en JSON-fil."""
    try:
        with open(config_file, 'r') as f:
            config = json.load(f)
        return config
    except FileNotFoundError:
        logging.error(f"Konfigurationsfilen {config_file} hittades inte.")
        return {}

def save_to_file(data, filename):
    """Sparar data till en fil."""
    with open(filename, 'w') as f:
        json.dump(data, f, indent=4)

def read_from_file(filename):
    """Läser data från en fil."""
    try:
        with open(filename, 'r') as f:
            return json.load(f)
    except FileNotFoundError:
        logging.error(f"Filen {filename} hittades inte.")
        return None

